---
title: 'Lof, identifying density based local outliers'
date: '2022-09-12'
tags: ['anomaly detection', 'paper review']
---

### Overview

KDD, an abbreviation for "knowledge discovery in database," refers to the process of discovering knowledge within databases and is one of the processes systematically organized by Fayyad in 1996.

---

### Abstract

Previous research in outlier detection has treated outliers as a binary property. This paper argues that in many situations, it is more meaningful to assign a degree of being an outlier to each object. This is called the Local Outlier Factor (LOF) of the object. LOF is introduced as having local characteristics that depend on how isolated an object is from its surrounding neighbors.

---

### Introduction

This paper states that starting from the KDD methodology, LOF would be useful in cases where we are looking for minority patterns (outliers) rather than finding patterns in the majority ratio. In the outlier detection task, while mentioning clustering research, it explains the difference that this approach considers objects not belonging to clusters as noise and calculates outliers globally.

---

### Problems of existing approaches

First, the existing distance-based approaches were introduced.

__Definition 1: Hawkins__

"An outlier is an observation that deviates so much from other observations as to arouse suspicions that it was generated by a different mechanism."
This methodology is defined by the following formula, where $o$ $p$ $q$ are used to represent the distance between objects $p$ and $q$ as $d(p,q)$:

$$
d(p,c) = min{d(p,q)|q ∈ C}
$$

__Definition 2: DB($pct$, $dmin$)__

An object p in dataset D is a DB($pct$, $dmin$)-outlier if at least percentage $pct$ of the objects in D lies at a distance greater than $dmin$ from p. That is, when the size of the set {$q∈D|d(p, q)≤dmin$} is at most (100 - $pct$)% of the size of D. This methodology only captures certain types of outliers, and due to its characteristic of viewing the dataset globally, it is said to be poor at distinguishing "local" outliers, which are objects that are outliers compared to their local neighbors, especially with respect to the surrounding density.

---

### Formal definition of Local Outlier

Some of the concepts used in this paper to represent the degree of being an outlier rather than a binary property are summarized below.

__Definition 1: $k$-distance of an object $p$__

For any positive integer k, the $k$-distance of object p ($k$-distance(p)) is defined as the distance $d(p,o)$ between p and object $o ∈ D$ that satisfies the following conditions:
(i) for at least $k$ objects $o'$, $d(p,o')$ ≤ $d(p,o)$ holds, and
(ii) for at most $k-1$ objects $o'$, $d(p,o')$ < $d(p,o)$ holds.

__Definition 2: $k$-distance neighborhood of an object $p$__

Given the $k$-distance of $p$, the $k$-distance neighborhood of $p$ contains all objects whose distance from $p$ is not greater than the $k$-distance. That is, an object $q$ satisfying { $q ∈ D{p}$ | $d(p, q)$ ≤ $k$-distance($p$) } is called a $k$-nearest neighbor of $p$.

__Usage 1: Upper and lower bounds for LOF__

The degree of outlierness for objects outside clusters can be generalized. For all objects p, $directmin(p)$ represents the minimum reachability distance between $p$ and its nearest neighbor. Also, $directmax(p)$ represents the maximum value.

The Local Reachability Density (LRD) indicator is used to represent the density of k data points near the reference data. Using this indicator, it can be expressed as follows:

<img src="https://velog.velcdn.com/images/ski06043/post/b4cfa621-6a01-46bb-8ac3-09dc51195466/image.png" alt="Example Image" style="display: block; margin: 0 auto; height:200;" />

$$
lrd(p) = 1/directmax(p) \rightarrow directmax(p) = max { reach-dist(p, q) | q \in NMinPts(p) }
$$

$$
lrd(o) = 1/indirectmax(p) \rightarrow indirectmax(p) = max { reach-dist(q, o) | q \in NMinPts(p) and o \in NMinPts(q) }
$$

---

### Role of Minpts

#### LOF changes according to Minpts

In conclusion, it is stated that LOF values do not monotonically increase or decrease with respect to MinPts values.

<img src="https://velog.velcdn.com/images/ski06043/post/6c69db18-59a0-4d22-b19c-4c9b3a3d655c/image.png" alt="Example Image" style="display: block; margin: 0 auto; height:200;" />

#### Minpts range setting

Since LOF values are not monotonic, it was proposed to calculate LOF heuristically, and in this paper, the "lower bound" and "upper bound" of the MinPts range are defined as MinPtsLB and MinPtsUB, respectively.
MinPtsLB can be considered as the minimum number of objects needed for a particular cluster to be distinguished from "local outliers." In most datasets, it is generally appropriate to set MinPtsLB between 10 and 20.
MinPtsUB represents the maximum size that a particular set of "closed by" objects $C$ can have to be considered as local outliers. Accordingly, if the MinPts value exceeds MinPtsUB, the LOF values of all objects in $C$ will naturally be close to 1.

---

### References

[Original path #1](https://dl.acm.org/doi/pdf/10.1145/335191.335388)



