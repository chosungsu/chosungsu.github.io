---
title: 'Escaping local minima : Hybrid artificial potential field with wall-follower for Decentralized multi robot navigation'
date: '2025-04-02'
tags: ['robotics', 'paper review']
---

### Abstract

본 논문에서는 불완전한 환경 정보만 주어진 비볼록 장애물이 있는 환경에서 분산된 다중 로봇 내비게이션의 문제를 다룹니다. 인공 포텐셜 필드(APF)와 같은 반응형 방법은 단순성과 효율성을 제공하지만, 전역 환경 인식이 부족하여 로봇이 지역 최소점에 갇히는 문제가 있습니다. 다른 기존 솔루션들은 로봇 간 통신에 의존하거나, 단일 로봇 시나리오에 한정되거나, 비볼록 장애물을 효과적으로 극복하는 데 어려움을 겪습니다.

따라서 여기서 제안한 방법은 지도 없이 로컬 센서 및 상태 정보만을 사용하는 것입니다. APF 접근 방식에 벽면 추종(WF) 동작을 통합함으로써, 우리의 방법은 다른 로봇을 포함한 비볼록 및 동적 장애물이 있는 경우에도 로봇이 지역 최소점에서 벗어날 수 있도록 합니다.

---

### Introduction

다중 로봇 내비게이션은 다른 로봇을 포함한 정적 및 동적 장애물 모두와의 조율 및 충돌 회피 필요성으로 인해 여러 가지 어려움을 겪습니다. 복잡한 실내 환경 또는 넓은 실외 공간과 같이 무선 통신이 제한된 환경에서는 중앙 집중식 방법이 단일 지점 고장 및 불완전한 상태 정보와 같은 문제에 직면하여 크고 동적인 환경에서는 신뢰할 수 없습니다.

최적 상호 충돌 회피(ORCA) 및 제어 장벽 함수(CBF)와 같은 분산형 접근 방식은 로컬 센서 데이터를 사용하여 대안을 제공합니다. 그러나 이러한 방법은 목표 추구와 충돌 회피 간의 상충되는 목표로 인해 로봇이 멈추는 교착 상태(deadlock)를 경험할 수 있습니다. 또한 ORCA 및 CBF는 종종 로컬 맵과 근처 로봇의 상태를 필요로 하는데, 이는 계산 비용이 많이 들거나 얻기 어려울 수 있습니다.

공통 맵을 구축하는 것이 비실용적일 때 맵리스 내비게이션(Mapless navigation)이 이상적입니다. 맵리스 내비게이션의 잘 알려진 방법은 인공 포텐셜 필드(APF)이며, 다중 로봇 시스템에서 일반적으로 사용됩니다. 그러나 APF는 비볼록 환경에서 목표의 인력과 장애물의 척력 사이에 로봇이 갇힐 수 있는 지역 최소점(local minima) 문제를 겪습니다. 이러한 지역 최소점을 극복하는 일반적인 접근 방식은 APF를 벽면 추종(Wall-Following, WF)과 결합하는 것입니다. WF는 로봇이 완전한 환경 정보 없이 장애물 경계를 감지하고 따라갈 수 있도록 하는 반응형 방법입니다.

본 연구에서 제안한 방법은 두 전환 체계를 사용하는 분산형 시스템입니다. 첫번째는 로컬 센서 데이터를 기반으로 rule based switch를 트리거합니다. 두번째는 비전 트랜스포머로 rule based switch를 향상시키고 learned switch로 로봇이 나란히 이동하는 현상을 줄입니다.

---

### Related work

벽면 추종(WF)은 알려지지 않은 공간을 탐색하기 위해 경계를 감지하고 따라가는 데 자주 사용되는 또 다른 반응형 방법입니다. Bug1 및 Bug2와 같은 초기 알고리즘은 정적 환경에서 단일 로봇에 대한 완결성을 보장하는 반면, TangentBug는 장애물의 정밀한 기하학적 정보를 필요로 합니다. MRBug는 WF를 다중 로봇 시스템으로 확장하지만 로봇 간 통신에 의존하므로 분산형 접근 방식에는 적합하지 않습니다. Swarm Gradient Bug 및 Swarm Bug와 같은 최근 알고리즘은 상세한 지도 없이 다중 로봇 내비게이션에 WF를 적용했지만 여전히 통신에 의존합니다. OA Bug는 지도와 통신에 의존하지 않기 위해 WF를 후각 및 청각 센서와 결합하지만, 충돌 회피를 위한 고정된 WF 방향에 의존하여 효율성이 떨어집니다.

µNAV는 전환 가중치를 조정하여 APF와 WF 사이를 동적으로 전환합니다. 비록 비볼록 환경에서 이론적 완결성을 제공하지만, 그 적용 가능성은 단일 로봇 정적 설정에 여전히 국한됩니다. RPF 및 DACOOPA와 같은 최근 개발은 APF-WF 전략을 다중 로봇 시스템으로 확장했습니다. 이들은 지역 최소점에서 벗어나고 로봇 간 충돌을 관리하기 위해 WF를 통합하지만, 여전히 비볼록 환경 및 복잡한 실제 시나리오에서는 어려움을 겪습니다.

---

### Problem description

로봇이 유한한 시간 $T$ 내에 목표에 도달해야 하는 분산형 다중 로봇 네비게이션 문제를 고려하여 사전 지도나 통신 없이 로컬에 의존해서 서로를 피하면서 알지 못하는 환경에서 작동하는 것을 목표로 하였습니다.

반경 $r$을 가진 $n$개의 각 로봇 $R_i$는 알 수 없는 장애물 $W_{obs}$와 자유 공간 $W_{free}=W/W_{obs}$를 포함하는 2d 공간 $W \subset R^2$에서 작동합니다. 시간 $t$에서의 각 로봇은 $s_i(t)=[x_i(t), y_i(t), \psi_i(t)]$로 설명이 가능하고 각도는 $(-\pi, \pi]$ 범위를 갖습니다. $R_i$가 $g_i$의 작은 허용오차 $\epsilon > 0$에 도달하고 $|p_i(t_i)-g_i| \le \epsilon$ 이 때 작업이 성공적이라고 간주합니다.

로봇의 내부 로컬 프레임인 RF에서 로봇 헤딩은 양의 $x$축과 정렬되고 양의 $y$축은 로봇의 오른쪽 방향과 정렬됩니다. 예를 들어 초기 프레임에서 현재 상태는 $x_i^{IF}(t)=[x_{i}^{IF}(t), y_{i}^{IF}(t), \psi_{i}^{IF}(t)]$ 입니다.

---

### Preliminary : APF

APF는 전방향 거리 센서 데이터를 기반으로 장애물을 피하면서 로봇을 목표로 안내하는 것을 목표로 합니다. 각 로봇은 목표를 향해 이동하기 위한 인력$(F_{att})$과 장애물을 피하기 위한 척력$(F_{rep})$을 계산합니다.

로봇 프레임에서의 목표 벡터$(g_{rel}(t))$는 로봇의 목표 $g^{IF}$와 현재 상대 상태인 $s^{IF}(t)$를 기반으로 계산됩니다.

$$
F_{att}(g_{rel}(t)) = \nabla U_{att}(g_{rel}(t))=g_{rel}(t)
$$

위의 수식에서 인력을 구할 수 있는데 $U_{att}(g_{rel}(t))$는 인력 포텐셜이고 이는 $|g_{rel}(t)|^2/2$입니다. 다음으로 척력은 척력 포텐셜인 $U_{rep}(L(t))$ \in R$로 계산이 되고 $L(t)=\{l_1(t), l_2(t), \dots, l_M(t)\}$는 해상도 $\tau$를 가진 $k$번째 센서 레이 벡터의 집합입니다. $H = \{\forall h \in {1, 2, \dots, M} \mid 0 < |l_h(t)| < d_{max}\}$는 이러한 레이 벡터의 인덱스를 포함합니다. 따라서 척력은 아래와 같이 계산됩니다.

$$
F_{rep}(L(t)) = \nabla U_{rep}(L(t)) = \sum_{h \in H} (-\frac{1}{|l_h(t)|^3})*(\frac{l_h(t)}{|l_h(t)|})
$$

척력 포텐셜은 $\sum_{h \in H} \frac{1}{2|l_h(t)|^2}$라고 합니다. 다음으로 총 힘 벡터 $F_{tot} \in R^2$는 아래와 같이 계산됩니다.

$$
F_{tot}(t)=\gamma F_{att}(g_{rel}(t))+\sigma F_{rep}(L(t))
$$

여기에서 $\gamma \in R^+$와 $\sigma \in R^+$는 각각 인력과 척력에 대한 가중치 값입니다. 이 균형에 의해 결정되는 총 힘은 로봇의 다음 이동 방향을 결정합니다. 만약 이 크기가 0에 가까워지면 로봇은 local minimum에 빠지게 되는 것입니다.

---

### Method

분산형 맵리스 내비게이션을 위해, 두 가지 다른 전환 방식인 규칙 기반 스위치(RS)와 학습된 스위치(LS)를 가진 APF-WF 방법을 제안합니다. APF와 WF 사이의 전환은 RS 또는 LS에 의해 생성된 $\theta_{rot}$에 따라 달라지며 기존 방식에서는 계산된 힘 벡터가 동적 장애물과의 연속적인 만남으로 인해 상당한 모션 진동을 유발할 수 있습니다. 이는 WF가 오로지 가장 가까운 장애물의 접선 방향에만 의존하기 때문입니다. 이러한 비효율적인 내비게이션을 방지하기 위해, 전방향 관측을 사용하여 인력을 점진적으로 회전시켜 APF와 WF 간의 더 부드러운 전환을 가능하게 하는 새로운 제안을 하였습니다.

구체적으로 회전된 인력 $F'{att} = R(\theta{rot}) \cdot F_{att}$에서 $\theta_{rot}$은 회전 각도이고 $R$은 2d 회전 행렬이 됩니다. 그리고 목표와 반대 방향으로 과도한 영향을 미치는 것을 방지하기 위해 최대 크기 $d_{max}$를 갖도록 정규화됩니다. 총 힘 $F_{tot}(t)=wF'_{att}(g_{rel}(t))+(1-w)F_{rep}(L(t))$로 주어집니다.

#### 1. Rule based Switch(RS)

매 시간 $t$마다 업데이트되는 $\theta_{rot}$ 값에 따라 모드를 결정합니다. 만약 이 값이 0이면 APF, 그렇지 않다면 WF 모드입니다. 각 로봇은 각 $t$, $t_{hp}$, $t_{lp}$에서의 상태를 유지하고 hit point는 APF에서 WF로의 전환을 나타내고 leave point는 그 반대의 전환을 의미합니다. $t$에서의 상태와 함께 이전 hp, lp에 대한 상태가 $S^{IF}$에 저장됩니다. 이 정보는 로봇이 장애물 주변에서 루프 경로를 반복하는 것을 방지하는 목적으로 사용합니다.

전환이 발생하면 $S^{IF}(t_{lp})$가 업데이트되고 반면 $s^{IF}(t_{hp})$는 현재 위치에서 목표까지의 거리인 $|g_{rel}(t)|$가 이전에 저장된 hp에서 목표까지의 거리인 $|g_{rel}(t_{hp})|$보다 작을 때만 업데이트됩니다. 이는 로봇이 목표에서 더 멀리 이동하는 현상을 방지할 수 있습니다.

총 힘 벡터와 WF 방향을 기반으로 로봇이 WF를 사용하여 local minimum을 벗어나기 위해 인력의 방향을 지속적으로 회전하고 APF로 돌아가도록 $\theta_{rot}$를 업데이트합니다. 크기가 $f_{thr}$ 실험적으로 $0.5*d_{max}$로 설정된 임계값 미만으로 떨어지면 로봇은 WF방향 $I_{dir}$을 곱한 $\theta_{upd}$를 추가하여 $\theta_{rot}$를 업데이트합니다. $\theta_{upd}$ 의 작은 값은 로봇을 점진적으로 변경하도록 하여 부드러운 조정을 보장합니다. 이는 local minimum을 벗어나면 그 각도를 0으로 줄여 APF 모드로 점진적으로 돌아갈 수 있도록 하는 것입니다.

#### 2. Learned Switch(LS)

RS가 대부분 효과적으로 작동하였지만 단순한 규칙은 복잡한 상호작용에서 어려움을 겪게 되고 false positive 즉, false-WF로 이어질 수 있습니다. 예를 들어 로봇들이 서로를 정적인 장애물로 취급하는 경우, 끝없이 WF를 하도록 만들게 되고 좁은 통로에서 마주보는 경우 동시에 후진을 하게 만들 수 있습니다.

이 문제를 해결하기 위해 vit 인코더를 사용하는 신경망 기반 switch를 통합하였습니다. 입력값은 $M+17$ 크기의 $o_{obs}$이며 $M$개의 거리와 $t$에서의 17차원으로 이루어집니다.

이러한 벡터들은 $T_seq$ 시간 단계에 걸쳐 관측 행렬 $O(t) \in R^{T_{seq} \times (M+17)}$로 쌓입니다. $t < T_{seq}$인 경우, 행렬은 초기 관측 벡터 $o_{obs}(0)$를 반복하여 패딩됩니다. 인코더 아키텍처는 패치 크기가 $1 \times (M+17)$이며, 모델이 시간 단계에 걸쳐 멀티 헤드 어텐션(Multi-Head Attention)을 적용할 수 있도록 합니다.

---

### Conclusion

비볼록 환경에서 지역 최소점 문제를 극복하기 위해 APF와 WF를 결합한 분산형, 맵리스 다중 로봇 내비게이션 방법을 제안하였습니다. 규칙 기반 및 학습 기반 전환 방식을 사용하여, 우리의 접근 방식은 로컬 센서만을 사용하고 통신 없이 충돌 없는 내비게이션을 가능하게 합니다. 실험 결과 로봇 수가 증가함에 따라 일정 부분 하락세를 보였지만 baseline보다 30%에 가깝게 우수한 결과를 보였고 좁은 공간에서 충돌을 줄이는데에도 효과적이었습니다.

---

### 참고 자료

[원본 경로 #1](https://arxiv.org/pdf/2409.10332)



